<div class="container p-3">
    <div class="w-100 text-center my-3">
        <img src="/logo.png" alt="Insightic Logo" style="width: 60px; height: 60px;">
        <h2>Contract Diff</h2>
        <div class="w-100 mx-auto" style="max-width: 720px;">Contract Diff is a tool utilized for cross-validation and
            examination of whitepapers and smart contracts.
            By scrutinizing the whitepaper and smart contract, Contract Diff possesses the ability to uncover
            disparities between them and provide appropriate warnings.</div>
    </div>

    <div class="w-100 text-center mx-auto my-3 border rounded p-3" style="max-width: 640px;">
        <h3>Step 1</h3>
        <div class="w-100 my-2 mx-auto">Upload whitepaper</div>
        <div class="w-100 my-2 mx-auto" style="max-width: 320px;">
            <input class="form-control" type="file" id="whitepaperFile">
        </div>
    </div>

    <div class="w-100 text-center mx-auto my-3 border rounded p-3" style="max-width: 640px;">
        <h3>Step 2</h3>
        <div class="w-100 my-2 mx-auto">Upload Smart Contract code</div>
        <div class="w-100 my-2 mx-auto" style="max-width: 320px;">
            <input class="form-control" type="file" id="codeFile">
        </div>
    </div>

    <div class="w-100 text-center my-3">
        <button class="btn btn-lg btn-danger text-center" id="submit" style="width: 200px;">
            <div id="submit-show-risks" class="mx-auto" style="display: block;">Show Risks!</div>
            <div id="submit-show-loading" class="mx-auto spinner-border" style="display: none;">
            </div>
        </button>
    </div>
</div>

<script>
    (function () {
        const whitepaperFileEle = $('#whitepaperFile');
        const codeFileEle = $('#codeFile');
        const submitEle = $('#submit');

        submitEle.addEventListener('click', async function () {
            const whitepaperFile = whitepaperFileEle.files[0];
            const codeFile = codeFileEle.files[0];

            if (!whitepaperFile || !codeFile) {
                alert('You have choose both Whitepaper and Code!');
                return;
            }

            $('#submit-show-risks').style.display = 'none';
            $('#submit-show-loading').style.display = 'block';
            submitEle.disabled = true;

            const whitepaperObjectId = await window.uploadFile(whitepaperFile);
            const codeObjectId = await window.uploadFile(codeFile);

            $('#submit-show-risks').style.display = 'block';
            $('#submit-show-loading').style.display = 'none';
            submitEle.disabled = false;

            console.log(whitepaperObjectId, codeObjectId);
        });
    })();
</script>